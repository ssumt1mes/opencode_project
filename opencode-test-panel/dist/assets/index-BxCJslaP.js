(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const nt=!1,st=(t,e)=>t===e,V=Symbol("solid-proxy"),we=Symbol("solid-track"),le={equals:st};let Pe=De;const W=1,oe=2,Ie={owned:null,cleanups:null,context:null,owner:null};var x=null;let ye=null,rt=null,C=null,E=null,q=null,pe=0;function ee(t,e){const n=C,s=x,r=t.length===0,i=e===void 0?s:e,o=r?Ie:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=r?t:()=>t(()=>B(()=>ne(o)));x=o,C=null;try{return Y(l,!0)}finally{C=n,x=s}}function ve(t,e){e=e?Object.assign({},le,e):le;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),Le(n,r));return[Fe.bind(n),s]}function z(t,e,n){const s=Ce(t,e,!1,W);re(s)}function Ne(t,e,n){Pe=ut;const s=Ce(t,e,!1,W);s.user=!0,q?q.push(s):re(s)}function te(t,e,n){n=n?Object.assign({},le,n):le;const s=Ce(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,re(s),Fe.bind(s)}function it(t){return Y(t,!1)}function B(t){if(C===null)return t();const e=C;C=null;try{return t()}finally{C=e}}function lt(t){Ne(()=>B(t))}function ot(t){return x===null||(x.cleanups===null?x.cleanups=[t]:x.cleanups.push(t)),t}function _e(){return C}function Fe(){if(this.sources&&this.state)if(this.state===W)re(this);else{const t=E;E=null,Y(()=>ae(this),!1),E=t}if(C){const t=this.observers?this.observers.length:0;C.sources?(C.sources.push(this),C.sourceSlots.push(t)):(C.sources=[this],C.sourceSlots=[t]),this.observers?(this.observers.push(C),this.observerSlots.push(C.sources.length-1)):(this.observers=[C],this.observerSlots=[C.sources.length-1])}return this.value}function Le(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&Y(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=ye&&ye.running;o&&ye.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?E.push(i):q.push(i),i.observers&&Me(i)),o||(i.state=W)}if(E.length>1e6)throw E=[],new Error},!1)),e}function re(t){if(!t.fn)return;ne(t);const e=pe;ct(t,t.value,e)}function ct(t,e,n){let s;const r=x,i=C;C=x=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=W,t.owned&&t.owned.forEach(ne),t.owned=null),t.updatedAt=n+1,qe(o)}finally{C=i,x=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Le(t,s):t.value=s,t.updatedAt=n)}function Ce(t,e,n,s=W,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:x,context:x?x.context:null,pure:n};return x===null||x!==Ie&&(x.owned?x.owned.push(i):x.owned=[i]),i}function ce(t){if(t.state===0)return;if(t.state===oe)return ae(t);if(t.suspense&&B(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<pe);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===W)re(t);else if(t.state===oe){const s=E;E=null,Y(()=>ae(t,e[0]),!1),E=s}}function Y(t,e){if(E)return t();let n=!1;e||(E=[]),q?n=!0:q=[],pe++;try{const s=t();return at(n),s}catch(s){n||(q=null),E=null,qe(s)}}function at(t){if(E&&(De(E),E=null),t)return;const e=q;q=null,e.length&&Y(()=>Pe(e),!1)}function De(t){for(let e=0;e<t.length;e++)ce(t[e])}function ut(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:ce(s)}for(e=0;e<n;e++)ce(t[e])}function ae(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===W?s!==e&&(!s.updatedAt||s.updatedAt<pe)&&ce(s):r===oe&&ae(s,e)}}}function Me(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=oe,n.pure?E.push(n):q.push(n),n.observers&&Me(n))}}function ne(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)ne(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ne(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function ft(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function qe(t,e=x){throw ft(t)}const dt=Symbol("fallback");function Te(t){for(let e=0;e<t.length;e++)t[e]()}function ht(t,e,n={}){let s=[],r=[],i=[],o=0,l=e.length>1?[]:null;return ot(()=>Te(i)),()=>{let c=t()||[],a=c.length,f,u;return c[we],B(()=>{let y,b,d,w,v,_,$,m,h;if(a===0)o!==0&&(Te(i),i=[],s=[],r=[],o=0,l&&(l=[])),n.fallback&&(s=[dt],r[0]=ee(A=>(i[0]=A,n.fallback())),o=1);else if(o===0){for(r=new Array(a),u=0;u<a;u++)s[u]=c[u],r[u]=ee(g);o=a}else{for(d=new Array(a),w=new Array(a),l&&(v=new Array(a)),_=0,$=Math.min(o,a);_<$&&s[_]===c[_];_++);for($=o-1,m=a-1;$>=_&&m>=_&&s[$]===c[m];$--,m--)d[m]=r[$],w[m]=i[$],l&&(v[m]=l[$]);for(y=new Map,b=new Array(m+1),u=m;u>=_;u--)h=c[u],f=y.get(h),b[u]=f===void 0?-1:f,y.set(h,u);for(f=_;f<=$;f++)h=s[f],u=y.get(h),u!==void 0&&u!==-1?(d[u]=r[f],w[u]=i[f],l&&(v[u]=l[f]),u=b[u],y.set(h,u)):i[f]();for(u=_;u<a;u++)u in d?(r[u]=d[u],i[u]=w[u],l&&(l[u]=v[u],l[u](u))):r[u]=ee(g);r=r.slice(0,o=a),s=c.slice(0)}return r});function g(y){if(i[u]=y,l){const[b,d]=ve(u);return l[u]=d,e(c[u],b)}return e(c[u])}}}function T(t,e){return B(()=>t(e||{}))}const pt=t=>`Stale read from <${t}>.`;function Ue(t){const e="fallback"in t&&{fallback:()=>t.fallback};return te(ht(()=>t.each,t.children,e||void 0))}function U(t){const e=t.keyed,n=te(()=>t.when,void 0,void 0),s=e?n:te(n,void 0,{equals:(r,i)=>!r==!i});return te(()=>{const r=s();if(r){const i=t.children;return typeof i=="function"&&i.length>0?B(()=>i(e?r:()=>{if(!B(s))throw pt("Show");return n()})):i}return t.fallback},void 0,void 0)}const gt=t=>te(()=>t());function mt(t,e,n){let s=n.length,r=e.length,i=s,o=0,l=0,c=e[r-1].nextSibling,a=null;for(;o<r||l<i;){if(e[o]===n[l]){o++,l++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===o){const f=i<s?l?n[l-1].nextSibling:n[i-l]:c;for(;l<i;)t.insertBefore(n[l++],f)}else if(i===l)for(;o<r;)(!a||!a.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[l]===e[r-1]){const f=e[--r].nextSibling;t.insertBefore(n[l++],e[o++].nextSibling),t.insertBefore(n[--i],f),e[r]=n[i]}else{if(!a){a=new Map;let u=l;for(;u<i;)a.set(n[u],u++)}const f=a.get(e[o]);if(f!=null)if(l<f&&f<i){let u=o,g=1,y;for(;++u<r&&u<i&&!((y=a.get(e[u]))==null||y!==f+g);)g++;if(g>f-l){const b=e[o];for(;l<f;)t.insertBefore(n[l++],b)}else t.replaceChild(n[l++],e[o++])}else o++;else e[o++].remove()}}}const je="_$DX_DELEGATE";function yt(t,e,n,s={}){let r;return ee(i=>{r=i,e===document?t():p(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function j(t,e,n,s){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=t,l.content.firstChild},o=()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function Ae(t,e=window.document){const n=e[je]||(e[je]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,wt))}}function ze(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}function ie(t,e){e==null?t.removeAttribute("class"):t.className=e}function $e(t,e,n,s){Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n}function bt(t,e,n){return B(()=>t(e,n))}function p(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return ue(t,e,s,n);z(r=>ue(t,e(),r,n),s)}function wt(t){let e=t.target;const n=`$$${t.type}`,s=t.target,r=t.currentTarget,i=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),o=()=>{const c=e[n];if(c&&!e.disabled){const a=e[`${n}Data`];if(a!==void 0?c.call(e,a,t):c.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},l=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const c=t.composedPath();i(c[0]);for(let a=0;a<c.length-2&&(e=c[a],!!o());a++){if(e._$host){e=e._$host,l();break}if(e.parentNode===r)break}}else l();i(s)}function ue(t,e,n,s,r){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,o=s!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===n))return n;if(o){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=K(t,n,s,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean")n=K(t,n,s);else{if(i==="function")return z(()=>{let l=e();for(;typeof l=="function";)l=l();n=ue(t,l,n,s)}),()=>n;if(Array.isArray(e)){const l=[],c=n&&Array.isArray(n);if(Se(l,e,n,r))return z(()=>n=ue(t,l,n,s,!0)),()=>n;if(l.length===0){if(n=K(t,n,s),o)return n}else c?n.length===0?Oe(t,l,s):mt(t,n,l):(n&&K(t),Oe(t,l));n=l}else if(e.nodeType){if(Array.isArray(n)){if(o)return n=K(t,n,s,e);K(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function Se(t,e,n,s){let r=!1;for(let i=0,o=e.length;i<o;i++){let l=e[i],c=n&&n[t.length],a;if(!(l==null||l===!0||l===!1))if((a=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))r=Se(t,l,c)||r;else if(a==="function")if(s){for(;typeof l=="function";)l=l();r=Se(t,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||r}else t.push(l),r=!0;else{const f=String(l);c&&c.nodeType===3&&c.data===f?t.push(c):t.push(document.createTextNode(f))}}return r}function Oe(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function K(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(r!==l){const c=l.parentNode===t;!i&&!o?c?t.replaceChild(r,l):t.insertBefore(r,n):c&&l.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}const fe=Symbol("store-raw"),G=Symbol("store-node"),M=Symbol("store-has"),Be=Symbol("store-self");function We(t){let e=t[V];if(!e&&(Object.defineProperty(t,V,{value:e=new Proxy(t,St)}),!Array.isArray(t))){const n=Object.keys(t),s=Object.getOwnPropertyDescriptors(t);for(let r=0,i=n.length;r<i;r++){const o=n[r];s[o].get&&Object.defineProperty(t,o,{enumerable:s[o].enumerable,get:s[o].get.bind(e)})}}return e}function J(t){let e;return t!=null&&typeof t=="object"&&(t[V]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function Q(t,e=new Set){let n,s,r,i;if(n=t!=null&&t[fe])return n;if(!J(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,l=t.length;o<l;o++)r=t[o],(s=Q(r,e))!==r&&(t[o]=s)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),l=Object.getOwnPropertyDescriptors(t);for(let c=0,a=o.length;c<a;c++)i=o[c],!l[i].get&&(r=t[i],(s=Q(r,e))!==r&&(t[i]=s))}return t}function de(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function se(t,e,n){if(t[e])return t[e];const[s,r]=ve(n,{equals:!1,internal:!0});return s.$=r,t[e]=s}function _t(t,e){const n=Reflect.getOwnPropertyDescriptor(t,e);return!n||n.get||!n.configurable||e===V||e===G||(delete n.value,delete n.writable,n.get=()=>t[V][e]),n}function He(t){_e()&&se(de(t,G),Be)()}function $t(t){return He(t),Reflect.ownKeys(t)}const St={get(t,e,n){if(e===fe)return t;if(e===V)return n;if(e===we)return He(t),n;const s=de(t,G),r=s[e];let i=r?r():t[e];if(e===G||e===M||e==="__proto__")return i;if(!r){const o=Object.getOwnPropertyDescriptor(t,e);_e()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(o&&o.get)&&(i=se(s,e,i)())}return J(i)?We(i):i},has(t,e){return e===fe||e===V||e===we||e===G||e===M||e==="__proto__"?!0:(_e()&&se(de(t,M),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:$t,getOwnPropertyDescriptor:_t};function X(t,e,n,s=!1){if(!s&&t[e]===n)return;const r=t[e],i=t.length;n===void 0?(delete t[e],t[M]&&t[M][e]&&r!==void 0&&t[M][e].$()):(t[e]=n,t[M]&&t[M][e]&&r===void 0&&t[M][e].$());let o=de(t,G),l;if((l=se(o,e,r))&&l.$(()=>n),Array.isArray(t)&&t.length!==i){for(let c=t.length;c<i;c++)(l=o[c])&&l.$();(l=se(o,"length",i))&&l.$(t.length)}(l=o[Be])&&l.$()}function Ve(t,e){const n=Object.keys(e);for(let s=0;s<n.length;s+=1){const r=n[s];X(t,r,e[r])}}function vt(t,e){if(typeof e=="function"&&(e=e(t)),e=Q(e),Array.isArray(e)){if(t===e)return;let n=0,s=e.length;for(;n<s;n++){const r=e[n];t[n]!==r&&X(t,n,r)}X(t,"length",s)}else Ve(t,e)}function Z(t,e,n=[]){let s,r=t;if(e.length>1){s=e.shift();const o=typeof s,l=Array.isArray(t);if(Array.isArray(s)){for(let c=0;c<s.length;c++)Z(t,[s[c]].concat(e),n);return}else if(l&&o==="function"){for(let c=0;c<t.length;c++)s(t[c],c)&&Z(t,[c].concat(e),n);return}else if(l&&o==="object"){const{from:c=0,to:a=t.length-1,by:f=1}=s;for(let u=c;u<=a;u+=f)Z(t,[u].concat(e),n);return}else if(e.length>1){Z(t[s],e,[s].concat(n));return}r=t[s],n=[s].concat(n)}let i=e[0];typeof i=="function"&&(i=i(r,n),i===r)||s===void 0&&i==null||(i=Q(i),s===void 0||J(r)&&J(i)&&!Array.isArray(i)?Ve(r,i):X(t,s,i))}function Ct(...[t,e]){const n=Q(t||{}),s=Array.isArray(n),r=We(n);function i(...o){it(()=>{s&&o.length===1?vt(n,o[0]):Z(n,o)})}return[r,i]}const he=new WeakMap,Ke={get(t,e){if(e===fe)return t;const n=t[e];let s;return J(n)?he.get(n)||(he.set(n,s=new Proxy(n,Ke)),s):n},set(t,e,n){return X(t,e,Q(n)),!0},deleteProperty(t,e){return X(t,e,void 0,!0),!0}};function Ee(t){return e=>{if(J(e)){let n;(n=he.get(e))||he.set(e,n=new Proxy(e,Ke)),t(n)}return e}}function At(){const[t,e]=Ct({modules:[],framework:"pytest",connected:!1,running:!1,lastRun:null,output:"",error:null,filter:"all"});return{state:t,setConnected:d=>e("connected",d),setRunning:d=>e("running",d),setFramework:d=>e("framework",d),setOutput:d=>e("output",d),appendOutput:d=>e("output",w=>w+d),setError:d=>e("error",d),setLastRun:d=>e("lastRun",d),setFilter:d=>e("filter",d),setModules:d=>e("modules",d),toggleModule:d=>{e("modules",w=>w.filepath===d,"expanded",w=>!w)},updateTestStatus:(d,w,v)=>{e(Ee(_=>{for(const $ of _.modules)for(const m of $.tests)if(m.id===d){m.status=w,v?.duration!==void 0&&(m.duration=v.duration),v?.error!==void 0&&(m.error=v.error),v?.output!==void 0&&(m.output=v.output);return}}))},setAllTestsStatus:d=>{e(Ee(w=>{for(const v of w.modules)for(const _ of v.tests)_.status=d}))},getFilteredModules:()=>t.filter==="all"?t.modules:t.modules.map(d=>({...d,tests:d.tests.filter(w=>w.status===t.filter)})).filter(d=>d.tests.length>0)}}const ge=ee(At),xt=({onSseError:t,onSseEvent:e,responseTransformer:n,responseValidator:s,sseDefaultRetryDelay:r,sseMaxRetryAttempts:i,sseMaxRetryDelay:o,sseSleepFn:l,url:c,...a})=>{let f;const u=l??(b=>new Promise(d=>setTimeout(d,b)));return{stream:async function*(){let b=r??3e3,d=0;const w=a.signal??new AbortController().signal;for(;!w.aborted;){d++;const v=a.headers instanceof Headers?a.headers:new Headers(a.headers);f!==void 0&&v.set("Last-Event-ID",f);try{const _=await fetch(c,{...a,headers:v,signal:w});if(!_.ok)throw new Error(`SSE failed: ${_.status} ${_.statusText}`);if(!_.body)throw new Error("No body in SSE response");const $=_.body.pipeThrough(new TextDecoderStream).getReader();let m="";const h=()=>{try{$.cancel()}catch{}};w.addEventListener("abort",h);try{for(;;){const{done:A,value:R}=await $.read();if(A)break;m+=R;const P=m.split(`

`);m=P.pop()??"";for(const k of P){const L=k.split(`
`),H=[];let N;for(const I of L)if(I.startsWith("data:"))H.push(I.replace(/^data:\s*/,""));else if(I.startsWith("event:"))N=I.replace(/^event:\s*/,"");else if(I.startsWith("id:"))f=I.replace(/^id:\s*/,"");else if(I.startsWith("retry:")){const xe=Number.parseInt(I.replace(/^retry:\s*/,""),10);Number.isNaN(xe)||(b=xe)}let O,D=!1;if(H.length){const I=H.join(`
`);try{O=JSON.parse(I),D=!0}catch{O=I}}D&&(s&&await s(O),n&&(O=await n(O))),e?.({data:O,event:N,id:f,retry:b}),H.length&&(yield O)}}}finally{w.removeEventListener("abort",h),$.releaseLock()}break}catch(_){if(t?.(_),i!==void 0&&d>=i)break;const $=Math.min(b*2**(d-1),o??3e4);await u($)}}}()}},Tt=async(t,e)=>{const n=typeof e=="function"?await e(t):e;if(n)return t.scheme==="bearer"?`Bearer ${n}`:t.scheme==="basic"?`Basic ${btoa(n)}`:n},jt={bodySerializer:t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString():n)},Ot=t=>{switch(t){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},Et=t=>{switch(t){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},kt=t=>{switch(t){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},Ge=({allowReserved:t,explode:e,name:n,style:s,value:r})=>{if(!e){const l=(t?r:r.map(c=>encodeURIComponent(c))).join(Et(s));switch(s){case"label":return`.${l}`;case"matrix":return`;${n}=${l}`;case"simple":return l;default:return`${n}=${l}`}}const i=Ot(s),o=r.map(l=>s==="label"||s==="simple"?t?l:encodeURIComponent(l):me({allowReserved:t,name:n,value:l})).join(i);return s==="label"||s==="matrix"?i+o:o},me=({allowReserved:t,name:e,value:n})=>{if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${t?n:encodeURIComponent(n)}`},Je=({allowReserved:t,explode:e,name:n,style:s,value:r,valueOnly:i})=>{if(r instanceof Date)return i?r.toISOString():`${n}=${r.toISOString()}`;if(s!=="deepObject"&&!e){let c=[];Object.entries(r).forEach(([f,u])=>{c=[...c,f,t?u:encodeURIComponent(u)]});const a=c.join(",");switch(s){case"form":return`${n}=${a}`;case"label":return`.${a}`;case"matrix":return`;${n}=${a}`;default:return a}}const o=kt(s),l=Object.entries(r).map(([c,a])=>me({allowReserved:t,name:s==="deepObject"?`${n}[${c}]`:c,value:a})).join(o);return s==="label"||s==="matrix"?o+l:l},Rt=/\{[^{}]+\}/g,Pt=({path:t,url:e})=>{let n=e;const s=e.match(Rt);if(s)for(const r of s){let i=!1,o=r.substring(1,r.length-1),l="simple";o.endsWith("*")&&(i=!0,o=o.substring(0,o.length-1)),o.startsWith(".")?(o=o.substring(1),l="label"):o.startsWith(";")&&(o=o.substring(1),l="matrix");const c=t[o];if(c==null)continue;if(Array.isArray(c)){n=n.replace(r,Ge({explode:i,name:o,style:l,value:c}));continue}if(typeof c=="object"){n=n.replace(r,Je({explode:i,name:o,style:l,value:c,valueOnly:!0}));continue}if(l==="matrix"){n=n.replace(r,`;${me({name:o,value:c})}`);continue}const a=encodeURIComponent(l==="label"?`.${c}`:c);n=n.replace(r,a)}return n},It=({baseUrl:t,path:e,query:n,querySerializer:s,url:r})=>{const i=r.startsWith("/")?r:`/${r}`;let o=(t??"")+i;e&&(o=Pt({path:e,url:o}));let l=n?s(n):"";return l.startsWith("?")&&(l=l.substring(1)),l&&(o+=`?${l}`),o},Qe=({allowReserved:t,array:e,object:n}={})=>r=>{const i=[];if(r&&typeof r=="object")for(const o in r){const l=r[o];if(l!=null)if(Array.isArray(l)){const c=Ge({allowReserved:t,explode:!0,name:o,style:"form",value:l,...e});c&&i.push(c)}else if(typeof l=="object"){const c=Je({allowReserved:t,explode:!0,name:o,style:"deepObject",value:l,...n});c&&i.push(c)}else{const c=me({allowReserved:t,name:o,value:l});c&&i.push(c)}}return i.join("&")},Nt=t=>{if(!t)return"stream";const e=t.split(";")[0]?.trim();if(e){if(e.startsWith("application/json")||e.endsWith("+json"))return"json";if(e==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(n=>e.startsWith(n)))return"blob";if(e.startsWith("text/"))return"text"}},Ft=(t,e)=>e?!!(t.headers.has(e)||t.query?.[e]||t.headers.get("Cookie")?.includes(`${e}=`)):!1,Lt=async({security:t,...e})=>{for(const n of t){if(Ft(e,n.name))continue;const s=await Tt(n,e.auth);if(!s)continue;const r=n.name??"Authorization";switch(n.in){case"query":e.query||(e.query={}),e.query[r]=s;break;case"cookie":e.headers.append("Cookie",`${r}=${s}`);break;case"header":default:e.headers.set(r,s);break}}},ke=t=>It({baseUrl:t.baseUrl,path:t.path,query:t.query,querySerializer:typeof t.querySerializer=="function"?t.querySerializer:Qe(t.querySerializer),url:t.url}),Re=(t,e)=>{const n={...t,...e};return n.baseUrl?.endsWith("/")&&(n.baseUrl=n.baseUrl.substring(0,n.baseUrl.length-1)),n.headers=Xe(t.headers,e.headers),n},Xe=(...t)=>{const e=new Headers;for(const n of t){if(!n||typeof n!="object")continue;const s=n instanceof Headers?n.entries():Object.entries(n);for(const[r,i]of s)if(i===null)e.delete(r);else if(Array.isArray(i))for(const o of i)e.append(r,o);else i!==void 0&&e.set(r,typeof i=="object"?JSON.stringify(i):i)}return e};class be{_fns;constructor(){this._fns=[]}clear(){this._fns=[]}getInterceptorIndex(e){return typeof e=="number"?this._fns[e]?e:-1:this._fns.indexOf(e)}exists(e){const n=this.getInterceptorIndex(e);return!!this._fns[n]}eject(e){const n=this.getInterceptorIndex(e);this._fns[n]&&(this._fns[n]=null)}update(e,n){const s=this.getInterceptorIndex(e);return this._fns[s]?(this._fns[s]=n,e):!1}use(e){return this._fns=[...this._fns,e],this._fns.length-1}}const Dt=()=>({error:new be,request:new be,response:new be}),Mt=Qe({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),qt={"Content-Type":"application/json"},Ye=(t={})=>({...jt,headers:qt,parseAs:"auto",querySerializer:Mt,...t}),Ze=(t={})=>{let e=Re(Ye(),t);const n=()=>({...e}),s=c=>(e=Re(e,c),n()),r=Dt(),i=async c=>{const a={...e,...c,fetch:c.fetch??e.fetch??globalThis.fetch,headers:Xe(e.headers,c.headers),serializedBody:void 0};a.security&&await Lt({...a,security:a.security}),a.requestValidator&&await a.requestValidator(a),a.body&&a.bodySerializer&&(a.serializedBody=a.bodySerializer(a.body)),(a.serializedBody===void 0||a.serializedBody==="")&&a.headers.delete("Content-Type");const f=ke(a);return{opts:a,url:f}},o=async c=>{const{opts:a,url:f}=await i(c),u={redirect:"follow",...a,body:a.serializedBody};let g=new Request(f,u);for(const m of r.request._fns)m&&(g=await m(g,a));const y=a.fetch;let b=await y(g);for(const m of r.response._fns)m&&(b=await m(b,g,a));const d={request:g,response:b};if(b.ok){if(b.status===204||b.headers.get("Content-Length")==="0")return a.responseStyle==="data"?{}:{data:{},...d};const m=(a.parseAs==="auto"?Nt(b.headers.get("Content-Type")):a.parseAs)??"json";let h;switch(m){case"arrayBuffer":case"blob":case"formData":case"json":case"text":h=await b[m]();break;case"stream":return a.responseStyle==="data"?b.body:{data:b.body,...d}}return m==="json"&&(a.responseValidator&&await a.responseValidator(h),a.responseTransformer&&(h=await a.responseTransformer(h))),a.responseStyle==="data"?h:{data:h,...d}}const w=await b.text();let v;try{v=JSON.parse(w)}catch{}const _=v??w;let $=_;for(const m of r.error._fns)m&&($=await m(_,b,g,a));if($=$||{},a.throwOnError)throw $;return a.responseStyle==="data"?void 0:{error:$,...d}},l=c=>{const a=f=>o({...f,method:c});return a.sse=async f=>{const{opts:u,url:g}=await i(f);return xt({...u,body:u.body,headers:u.headers,method:c,url:g})},a};return{buildUrl:ke,connect:l("CONNECT"),delete:l("DELETE"),get:l("GET"),getConfig:n,head:l("HEAD"),interceptors:r,options:l("OPTIONS"),patch:l("PATCH"),post:l("POST"),put:l("PUT"),request:o,setConfig:s,trace:l("TRACE")}},Ut=Ze(Ye({baseUrl:"http://localhost:4096"}));class S{_client=Ut;constructor(e){e?.client&&(this._client=e.client)}}class zt extends S{event(e){return(e?.client??this._client).get.sse({url:"/global/event",...e})}}class Bt extends S{list(e){return(e?.client??this._client).get({url:"/project",...e})}current(e){return(e?.client??this._client).get({url:"/project/current",...e})}}class Wt extends S{list(e){return(e?.client??this._client).get({url:"/pty",...e})}create(e){return(e?.client??this._client).post({url:"/pty",...e,headers:{"Content-Type":"application/json",...e?.headers}})}remove(e){return(e.client??this._client).delete({url:"/pty/{id}",...e})}get(e){return(e.client??this._client).get({url:"/pty/{id}",...e})}update(e){return(e.client??this._client).put({url:"/pty/{id}",...e,headers:{"Content-Type":"application/json",...e.headers}})}connect(e){return(e.client??this._client).get({url:"/pty/{id}/connect",...e})}}class Ht extends S{get(e){return(e?.client??this._client).get({url:"/config",...e})}update(e){return(e?.client??this._client).patch({url:"/config",...e,headers:{"Content-Type":"application/json",...e?.headers}})}providers(e){return(e?.client??this._client).get({url:"/config/providers",...e})}}class Vt extends S{ids(e){return(e?.client??this._client).get({url:"/experimental/tool/ids",...e})}list(e){return(e.client??this._client).get({url:"/experimental/tool",...e})}}class Kt extends S{dispose(e){return(e?.client??this._client).post({url:"/instance/dispose",...e})}}class Gt extends S{get(e){return(e?.client??this._client).get({url:"/path",...e})}}class Jt extends S{get(e){return(e?.client??this._client).get({url:"/vcs",...e})}}class Qt extends S{list(e){return(e?.client??this._client).get({url:"/session",...e})}create(e){return(e?.client??this._client).post({url:"/session",...e,headers:{"Content-Type":"application/json",...e?.headers}})}status(e){return(e?.client??this._client).get({url:"/session/status",...e})}delete(e){return(e.client??this._client).delete({url:"/session/{id}",...e})}get(e){return(e.client??this._client).get({url:"/session/{id}",...e})}update(e){return(e.client??this._client).patch({url:"/session/{id}",...e,headers:{"Content-Type":"application/json",...e.headers}})}children(e){return(e.client??this._client).get({url:"/session/{id}/children",...e})}todo(e){return(e.client??this._client).get({url:"/session/{id}/todo",...e})}init(e){return(e.client??this._client).post({url:"/session/{id}/init",...e,headers:{"Content-Type":"application/json",...e.headers}})}fork(e){return(e.client??this._client).post({url:"/session/{id}/fork",...e,headers:{"Content-Type":"application/json",...e.headers}})}abort(e){return(e.client??this._client).post({url:"/session/{id}/abort",...e})}unshare(e){return(e.client??this._client).delete({url:"/session/{id}/share",...e})}share(e){return(e.client??this._client).post({url:"/session/{id}/share",...e})}diff(e){return(e.client??this._client).get({url:"/session/{id}/diff",...e})}summarize(e){return(e.client??this._client).post({url:"/session/{id}/summarize",...e,headers:{"Content-Type":"application/json",...e.headers}})}messages(e){return(e.client??this._client).get({url:"/session/{id}/message",...e})}prompt(e){return(e.client??this._client).post({url:"/session/{id}/message",...e,headers:{"Content-Type":"application/json",...e.headers}})}message(e){return(e.client??this._client).get({url:"/session/{id}/message/{messageID}",...e})}promptAsync(e){return(e.client??this._client).post({url:"/session/{id}/prompt_async",...e,headers:{"Content-Type":"application/json",...e.headers}})}command(e){return(e.client??this._client).post({url:"/session/{id}/command",...e,headers:{"Content-Type":"application/json",...e.headers}})}shell(e){return(e.client??this._client).post({url:"/session/{id}/shell",...e,headers:{"Content-Type":"application/json",...e.headers}})}revert(e){return(e.client??this._client).post({url:"/session/{id}/revert",...e,headers:{"Content-Type":"application/json",...e.headers}})}unrevert(e){return(e.client??this._client).post({url:"/session/{id}/unrevert",...e})}}class Xt extends S{list(e){return(e?.client??this._client).get({url:"/command",...e})}}class Yt extends S{authorize(e){return(e.client??this._client).post({url:"/provider/{id}/oauth/authorize",...e,headers:{"Content-Type":"application/json",...e.headers}})}callback(e){return(e.client??this._client).post({url:"/provider/{id}/oauth/callback",...e,headers:{"Content-Type":"application/json",...e.headers}})}}class Zt extends S{list(e){return(e?.client??this._client).get({url:"/provider",...e})}auth(e){return(e?.client??this._client).get({url:"/provider/auth",...e})}oauth=new Yt({client:this._client})}class en extends S{text(e){return(e.client??this._client).get({url:"/find",...e})}files(e){return(e.client??this._client).get({url:"/find/file",...e})}symbols(e){return(e.client??this._client).get({url:"/find/symbol",...e})}}class tn extends S{list(e){return(e.client??this._client).get({url:"/file",...e})}read(e){return(e.client??this._client).get({url:"/file/content",...e})}status(e){return(e?.client??this._client).get({url:"/file/status",...e})}}let nn=class extends S{log(e){return(e?.client??this._client).post({url:"/log",...e,headers:{"Content-Type":"application/json",...e?.headers}})}agents(e){return(e?.client??this._client).get({url:"/agent",...e})}};class et extends S{remove(e){return(e.client??this._client).delete({url:"/mcp/{name}/auth",...e})}start(e){return(e.client??this._client).post({url:"/mcp/{name}/auth",...e})}callback(e){return(e.client??this._client).post({url:"/mcp/{name}/auth/callback",...e,headers:{"Content-Type":"application/json",...e.headers}})}authenticate(e){return(e.client??this._client).post({url:"/mcp/{name}/auth/authenticate",...e})}set(e){return(e.client??this._client).put({url:"/auth/{id}",...e,headers:{"Content-Type":"application/json",...e.headers}})}}class sn extends S{status(e){return(e?.client??this._client).get({url:"/mcp",...e})}add(e){return(e?.client??this._client).post({url:"/mcp",...e,headers:{"Content-Type":"application/json",...e?.headers}})}connect(e){return(e.client??this._client).post({url:"/mcp/{name}/connect",...e})}disconnect(e){return(e.client??this._client).post({url:"/mcp/{name}/disconnect",...e})}auth=new et({client:this._client})}class rn extends S{status(e){return(e?.client??this._client).get({url:"/lsp",...e})}}class ln extends S{status(e){return(e?.client??this._client).get({url:"/formatter",...e})}}class on extends S{next(e){return(e?.client??this._client).get({url:"/tui/control/next",...e})}response(e){return(e?.client??this._client).post({url:"/tui/control/response",...e,headers:{"Content-Type":"application/json",...e?.headers}})}}class cn extends S{appendPrompt(e){return(e?.client??this._client).post({url:"/tui/append-prompt",...e,headers:{"Content-Type":"application/json",...e?.headers}})}openHelp(e){return(e?.client??this._client).post({url:"/tui/open-help",...e})}openSessions(e){return(e?.client??this._client).post({url:"/tui/open-sessions",...e})}openThemes(e){return(e?.client??this._client).post({url:"/tui/open-themes",...e})}openModels(e){return(e?.client??this._client).post({url:"/tui/open-models",...e})}submitPrompt(e){return(e?.client??this._client).post({url:"/tui/submit-prompt",...e})}clearPrompt(e){return(e?.client??this._client).post({url:"/tui/clear-prompt",...e})}executeCommand(e){return(e?.client??this._client).post({url:"/tui/execute-command",...e,headers:{"Content-Type":"application/json",...e?.headers}})}showToast(e){return(e?.client??this._client).post({url:"/tui/show-toast",...e,headers:{"Content-Type":"application/json",...e?.headers}})}publish(e){return(e?.client??this._client).post({url:"/tui/publish",...e,headers:{"Content-Type":"application/json",...e?.headers}})}control=new on({client:this._client})}class an extends S{subscribe(e){return(e?.client??this._client).get.sse({url:"/event",...e})}}class un extends S{postSessionIdPermissionsPermissionId(e){return(e.client??this._client).post({url:"/session/{id}/permissions/{permissionID}",...e,headers:{"Content-Type":"application/json",...e.headers}})}global=new zt({client:this._client});project=new Bt({client:this._client});pty=new Wt({client:this._client});config=new Ht({client:this._client});tool=new Vt({client:this._client});instance=new Kt({client:this._client});path=new Gt({client:this._client});vcs=new Jt({client:this._client});session=new Qt({client:this._client});command=new Xt({client:this._client});provider=new Zt({client:this._client});find=new en({client:this._client});file=new tn({client:this._client});app=new nn({client:this._client});mcp=new sn({client:this._client});lsp=new rn({client:this._client});formatter=new ln({client:this._client});tui=new cn({client:this._client});auth=new et({client:this._client});event=new an({client:this._client})}function fn(t){t?.fetch||(t={...t,fetch:s=>(s.timeout=!1,fetch(s))}),t?.directory&&(t.headers={...t.headers,"x-opencode-directory":encodeURIComponent(t.directory)});const e=Ze(t);return new un({client:e})}const dn="http://localhost:4096",F=fn({baseUrl:dn});async function hn(){try{const e=(await F.find.files({query:{query:"test_*.py",type:"file"}})).data??[],s=(await F.find.files({query:{query:"*_test.py",type:"file"}})).data??[],r=new Set([...e,...s]);return Array.from(r).sort()}catch(t){return console.error("Failed to discover test files:",t),[]}}async function pn(t){try{const s=((await F.file.read({query:{path:t}})).data?.content??"").split(`
`),r=[],i=t.replace(/\//g,".").replace(/\.py$/,"");for(let o=0;o<s.length;o++){const l=s[o],c=l.match(/^\s*def\s+(test_\w+)\s*\(/);if(c){r.push({id:`${t}::${c[1]}`,name:c[1],module:i,filepath:t,lineno:o+1,status:"idle"});continue}const a=l.match(/^\s*class\s+(Test\w+)\s*\(.*(?:TestCase|unittest)/);if(a){const f=a[1];for(let u=o+1;u<s.length;u++){const g=s[u];if(/^class\s/.test(g)||/^def\s/.test(g))break;const y=g.match(/^\s+def\s+(test_\w+)\s*\(/);y&&r.push({id:`${t}::${f}::${y[1]}`,name:`${f}.${y[1]}`,module:i,filepath:t,lineno:u+1,status:"idle"})}}}return r}catch(e){return console.error(`Failed to parse test file ${t}:`,e),[]}}async function gn(){try{return((await F.find.files({query:{query:"pytest.ini",type:"file"}})).data??[]).length>0||((await F.find.files({query:{query:"conftest.py",type:"file"}})).data??[]).length>0,"pytest"}catch{return"pytest"}}function mn(t,e,n=!0){return t==="pytest"?["python","-m","pytest",n?"-v":"","--tb=short","--no-header",...e??[]].filter(Boolean).join(" "):e&&e.length>0?`python -m unittest ${n?"-v":""} ${e.join(" ")}`:`python -m unittest discover ${n?"-v":""}`}function yn(t){const e=new Map;for(const n of t.split(`
`)){const s=n.match(/^(.+?::[\w.]+)\s+(PASSED|FAILED|ERROR|SKIPPED)/);if(s){const r=s[1].trim(),i={PASSED:"passed",FAILED:"failed",ERROR:"error",SKIPPED:"skipped"};e.set(r,{status:i[s[2]]??"error"})}}return e}function bn(t){const e=new Map;for(const n of t.split(`
`)){const s=n.match(/^(test_\w+)\s+\((.+?)\)\s+\.\.\.\s+(ok|FAIL|ERROR|skip)/i);if(s){const r=s[1],i=s[2],o={ok:"passed",FAIL:"failed",ERROR:"error",skip:"skipped"};e.set(`${i}.${r}`,{status:o[s[3]]??"error"})}}return e}function wn(t){const e=t.match(/=+\s*([\d\w\s,]+)\s+in\s+([\d.]+)s\s*=+/);if(e){const s=e[1],r=parseFloat(e[2]),i=parseInt(s.match(/(\d+)\s+passed/)?.[1]??"0"),o=parseInt(s.match(/(\d+)\s+failed/)?.[1]??"0"),l=parseInt(s.match(/(\d+)\s+error/)?.[1]??"0"),c=parseInt(s.match(/(\d+)\s+skipped/)?.[1]??"0");return{total:i+o+l+c,passed:i,failed:o,errors:l,skipped:c,duration:r}}const n=t.match(/Ran\s+(\d+)\s+tests?\s+in\s+([\d.]+)s/);return n?{total:parseInt(n[1]),duration:parseFloat(n[2])}:{}}var _n=j("<span class=summary-failed> failed"),$n=j("<span class=summary-error> errors"),Sn=j("<div class=summary><span class=summary-passed> passed</span><span class=summary-duration>s"),vn=j('<div class=toolbar><div class=toolbar-left><button class="btn btn-primary"></button><button class="btn btn-secondary"title="Re-discover tests">Refresh</button></div><div class=toolbar-center></div><div class=toolbar-right>'),Cn=j("<button>");const An=[{value:"all",label:"All"},{value:"passed",label:"Passed"},{value:"failed",label:"Failed"},{value:"error",label:"Errors"},{value:"skipped",label:"Skipped"}],xn=t=>{const{state:e,setFilter:n}=ge,s=()=>e.modules.reduce((r,i)=>r+i.tests.length,0);return(()=>{var r=vn(),i=r.firstChild,o=i.firstChild,l=o.nextSibling,c=i.nextSibling,a=c.nextSibling;return $e(o,"click",t.onRunAll),p(o,()=>e.running?"Running...":"Run All"),$e(l,"click",t.onRefresh),p(c,()=>An.map(f=>(()=>{var u=Cn();return u.$$click=()=>n(f.value),p(u,()=>f.label),z(()=>ie(u,`btn-filter ${e.filter===f.value?"active":""}`)),u})())),p(a,T(U,{get when(){return e.lastRun},get children(){var f=Sn(),u=f.firstChild,g=u.firstChild,y=u.nextSibling,b=y.firstChild;return p(u,()=>e.lastRun.passed,g),p(f,T(U,{get when(){return e.lastRun.failed>0},get children(){var d=_n(),w=d.firstChild;return p(d,()=>e.lastRun.failed,w),d}}),y),p(f,T(U,{get when(){return e.lastRun.errors>0},get children(){var d=$n(),w=d.firstChild;return p(d,()=>e.lastRun.errors,w),d}}),y),p(y,()=>e.lastRun.duration.toFixed(2),b),f}})),z(f=>{var u=e.running||s()===0,g=e.running;return u!==f.e&&(o.disabled=f.e=u),g!==f.t&&(l.disabled=f.t=g),f},{e:void 0,t:void 0}),r})()};Ae(["click"]);var Tn=j("<span>");const jn={idle:{label:"IDLE",class:"badge-idle"},running:{label:"RUN",class:"badge-running"},passed:{label:"PASS",class:"badge-passed"},failed:{label:"FAIL",class:"badge-failed"},error:{label:"ERR",class:"badge-error"},skipped:{label:"SKIP",class:"badge-skipped"}},On=t=>{const e=()=>jn[t.status];return(()=>{var n=Tn();return p(n,()=>e().label),z(()=>ie(n,`badge ${e().class}`)),n})()};var En=j("<span class=test-duration>s"),kn=j("<span class=test-line>L"),Rn=j("<pre class=test-error>"),Pn=j('<div><div class=test-item-row><span class=test-name></span><button class="btn-icon btn-run-single"title="Run this test">&#9654;');const In=t=>(()=>{var e=Pn(),n=e.firstChild,s=n.firstChild,r=s.nextSibling;return p(n,T(On,{get status(){return t.test.status}}),s),p(s,()=>t.test.name),p(n,T(U,{get when(){return t.test.duration!==void 0},get children(){var i=En(),o=i.firstChild;return p(i,()=>t.test.duration?.toFixed(2),o),i}}),r),p(n,T(U,{get when(){return t.test.lineno},get children(){var i=kn();return i.firstChild,p(i,()=>t.test.lineno,null),i}}),r),r.$$click=()=>t.onRun(t.test),p(e,T(U,{get when(){return t.test.error},get children(){var i=Rn();return p(i,()=>t.test.error),i}}),null),z(i=>{var o=`test-item test-item-${t.test.status}`,l=t.test.id;return o!==i.e&&ie(e,i.e=o),l!==i.t&&ze(s,"title",i.t=l),i},{e:void 0,t:void 0}),e})();Ae(["click"]);var Nn=j('<div><div class=module-header><span class=module-chevron></span><span class=module-filepath></span><span class=module-count>/</span><button class="btn-icon btn-run-module"title="Run all tests in this module">&#9654;&#9654;'),Fn=j("<div class=module-tests>");const Ln=t=>{const e=()=>t.module.tests.filter(r=>r.status==="passed").length,n=()=>t.module.tests.length,s=()=>t.module.tests.some(r=>r.status==="failed"||r.status==="error");return(()=>{var r=Nn(),i=r.firstChild,o=i.firstChild,l=o.nextSibling,c=l.nextSibling,a=c.firstChild,f=c.nextSibling;return $e(i,"click",t.onToggle),p(o,()=>t.module.expanded?"▼":"▶"),p(l,()=>t.module.name),p(c,e,a),p(c,n,null),f.$$click=u=>{u.stopPropagation(),t.onRunModule(t.module)},p(r,(()=>{var u=gt(()=>!!t.module.expanded);return()=>u()&&(()=>{var g=Fn();return p(g,T(Ue,{get each(){return t.module.tests},children:y=>T(In,{test:y,get onRun(){return t.onRunTest}})})),g})()})(),null),z(u=>{var g=`module-group ${s()?"module-has-failures":""}`,y=t.module.filepath;return g!==u.e&&ie(r,u.e=g),y!==u.t&&ze(l,"title",u.t=y),u},{e:void 0,t:void 0}),r})()};Ae(["click"]);var Dn=j("<span class=running-indicator>"),Mn=j("<div class=output-panel><div class=output-header><span>Output</span></div><pre class=output-content>");const qn=()=>{const{state:t}=ge;let e;return Ne(()=>{t.output,e&&(e.scrollTop=e.scrollHeight)}),(()=>{var n=Mn(),s=n.firstChild;s.firstChild;var r=s.nextSibling;p(s,T(U,{get when(){return t.running},get children(){return Dn()}}),null);var i=e;return typeof i=="function"?bt(i,r):e=r,p(r,()=>t.output||"No output yet. Run tests to see results."),n})()};var Un=j("<div><span class=status-dot></span><span class=status-text></span><span class=framework-label>");const zn=()=>{const{state:t}=ge;return(()=>{var e=Un(),n=e.firstChild,s=n.nextSibling,r=s.nextSibling;return p(s,()=>t.connected?"Connected to OpenCode":"Disconnected"),p(r,()=>t.framework),z(()=>ie(e,`connection-status ${t.connected?"connected":"disconnected"}`)),e})()};var Bn=j("<div class=error-banner>"),Wn=j("<div class=app><header class=app-header><h1>Test Runner</h1></header><div class=main-content><div class=test-list>"),Hn=j("<div class=empty-state>");const Vn=()=>{const{state:t,setConnected:e,setRunning:n,setFramework:s,setModules:r,setOutput:i,setError:o,setLastRun:l,toggleModule:c,updateTestStatus:a,setAllTestsStatus:f,getFilteredModules:u}=ge,[g,y]=ve(null);lt(async()=>{await b(),await v(),await d(),w()});async function b(){try{(await F.global.health()).data&&e(!0)}catch{e(!1),o("Cannot connect to OpenCode server. Is it running on localhost:4096?")}}async function d(){try{const A=(await F.session.list()).data??[];if(A.length>0)y(A[0].id);else{const R=await F.session.create({body:{title:"Test Runner"}});y(R.data?.id??null)}}catch(h){console.error("Failed to get/create session:",h)}}async function w(){try{const h=await F.event.subscribe();for await(const A of h.stream)A.type==="session.idle"&&n(!1)}catch{setTimeout(w,3e3)}}async function v(){try{const h=await gn();s(h);const A=await hn(),R=[];for(const P of A){const k=await pn(P);if(k.length>0){const L=P.split("/").pop()??P;R.push({filepath:P,name:L,tests:k,expanded:!0})}}r(R),o(null)}catch(h){o(`Failed to discover tests: ${h}`)}}async function _(h){const A=g();if(!A){o("No active session. Please check connection.");return}n(!0),i(""),h||f("running");const R=mn(t.framework,h);try{const k=(await F.session.shell({path:{id:A},body:{agent:"build",command:R}})).data?.parts??[];let L="";for(const O of k)(O.type==="tool-result"||O.type==="text")&&(L+=(O.text??O.content??"")+`
`);i(L);const H=t.framework==="pytest"?yn(L):bn(L);for(const[O,D]of H)a(O,D.status,{error:D.error});for(const O of t.modules)for(const D of O.tests)D.status==="running"&&(H.has(D.id)||a(D.id,"idle"));const N=wn(L);N.total!==void 0&&l({total:N.total??0,passed:N.passed??0,failed:N.failed??0,errors:N.errors??0,skipped:N.skipped??0,duration:N.duration??0,timestamp:new Date().toISOString()})}catch(P){i(`Error running tests: ${P}`),f("error")}finally{n(!1)}}function $(h){a(h.id,"running"),t.framework==="pytest"?_([h.id]):_([h.module+"."+h.name])}function m(h){for(const A of h.tests)a(A.id,"running");_([h.filepath])}return(()=>{var h=Wn(),A=h.firstChild;A.firstChild;var R=A.nextSibling,P=R.firstChild;return p(A,T(zn,{}),null),p(h,T(U,{get when(){return t.error},get children(){var k=Bn();return p(k,()=>t.error),k}}),R),p(h,T(xn,{onRunAll:()=>_(),onRefresh:v}),R),p(P,T(U,{get when(){return u().length>0},get fallback(){return(()=>{var k=Hn();return p(k,()=>t.modules.length===0?"No test files found. Click Refresh to scan.":"No tests match the current filter."),k})()},get children(){return T(Ue,{get each(){return u()},children:k=>T(Ln,{module:k,onToggle:()=>c(k.filepath),onRunTest:$,onRunModule:m})})}})),p(R,T(qn,{}),null),h})()},tt=document.getElementById("root");if(!tt)throw new Error("Root element not found");yt(()=>T(Vn,{}),tt);
